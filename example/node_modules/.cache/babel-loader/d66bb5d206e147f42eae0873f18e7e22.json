{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { useRef, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nconst refeObject = useRef;\nconst reactState = useState;\n//const reactEffect = useEffect as any;\nfunction newId() {\n  return uuidv4();\n}\nconst toObject = (...keys) => {\n  if (keys.length === 0) return {\n    AllKeys: true\n  };\n  return keys.reduce((c, v) => {\n    c[v] = true;\n    return c;\n  }, {});\n};\nfunction getPrototypeChain(obj) {\n  let prototypeChain = [];\n  (function innerRecursiveFunction(obj) {\n    let currentPrototype = obj != null ? Object.getPrototypeOf(obj) : null;\n    prototypeChain.push(currentPrototype);\n    if (currentPrototype != null) {\n      innerRecursiveFunction(currentPrototype);\n    }\n  })(obj);\n  return prototypeChain.filter(x => x !== null);\n}\nconst keys = item => {\n  let prototypes = getPrototypeChain(item);\n  let ks = [...Object.keys(item), ...prototypes.flatMap(x => Object.getOwnPropertyNames(x))];\n  let obp = Object.getOwnPropertyNames(Object.prototype);\n  let cbp = Object.getOwnPropertyNames(Create.prototype);\n  ks = ks.filter(x => !obp.includes(x) && !cbp.includes(x)).filter((value, index, array) => array.indexOf(value) === index);\n  // alert(JSON.stringify(ks, undefined, 4));\n  return ks;\n};\n/*\nconst getValueByPath = (value: any, path: string) => {\n    let current = value;\n    for (let item of path.split(\".\")) {\n        current = current[item];\n    }\n\n    return current;\n};\n*/\nconst valid = (item, validArray) => {\n  if (!item || item === null) return false;\n  if (item instanceof Set) return false;\n  if (item instanceof Map) return false;\n  if (typeof item === \"function\") return false;\n  if (typeof item === \"string\") return false;\n  if (validArray && Array.isArray(item) && item.length > 0) {\n    return valid(item[0]);\n  }\n  return typeof item === \"object\";\n};\nclass EventTrigger {\n  constructor() {\n    this.___events = {};\n    this.___timer = undefined;\n    this.___waitingEvents = {};\n    this.___addedPaths = [];\n    this.speed = 2;\n  }\n  add(id, item) {\n    this.___events[id] = item;\n  }\n  remove(id) {\n    delete this.___events[id];\n  }\n  ___onChange(key, parentItem) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        clearTimeout(this.___timer);\n        let global = key.split(\".\").reverse().filter((x, i) => i > 0).join(\".\");\n        for (let item in this.___events) {\n          if (this.___events[item].keys.AllKeys || this.___events[item].keys[key] || this.___events[item].keys[global]) {\n            if (this.___events[item].fs === undefined) {\n              if (!this.___waitingEvents[item]) {\n                this.___waitingEvents[item] = {\n                  event: this.___events[item],\n                  items: new Map()\n                };\n              }\n              this.___waitingEvents[item].items.set(key, {\n                key: key,\n                item: parentItem\n              });\n            } else this.___events[item].fs();\n          }\n        }\n        const trigger = () => {\n          let items = Object.assign({}, this.___waitingEvents);\n          this.___waitingEvents = {};\n          for (let item in items) {\n            items[item].event.fn(items[item].items);\n          }\n        };\n        if (this.speed !== undefined) {\n          this.___timer = setTimeout(() => trigger(), this.speed);\n        } else trigger();\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n}\nclass ICreate {}\nclass Create extends ICreate {\n  hook(...keys) {\n    let id = refeObject(newId()).current;\n    let ks = refeObject();\n    if (!ks.current) ks.current = toObject(...keys);\n    let [update, setUpdate] = reactState();\n    this.___events.add(id, {\n      fn: items => {\n        if (!update) {\n          setUpdate(Object.keys(ks.current).reduce((c, v) => {\n            var _a;\n            c[v] = (_a = items.get(v)) === null || _a === void 0 ? void 0 : _a.item;\n            return c;\n          }, {}));\n        } else {\n          let a = Object.assign({}, update);\n          let refresh = false;\n          for (let item of [...items.values()]) {\n            if (a[item.key] !== item.item) {\n              refresh = true;\n              a[item.key] = item.item;\n            }\n          }\n          if (refresh) {\n            setUpdate(a);\n          }\n        }\n      },\n      keys: ks.current\n    });\n  }\n  useEffect(fn, ...keys) {\n    let id = refeObject(newId()).current;\n    let ks = refeObject();\n    if (!ks.current) ks.current = toObject(...keys);\n    this.___events.add(id, {\n      fs: () => fn(this),\n      keys: ks.current\n    });\n  }\n  bind(path) {\n    if (this.___events.___addedPaths.includes(path)) return;\n    this.___events.___addedPaths.push(path);\n    let item = this;\n    let key = path.split(\".\").reverse()[0];\n    for (let p of path.split(\".\")) {\n      if (typeof item[p] === \"object\") {\n        item = item[p];\n      } else break;\n    }\n    let v = item[key];\n    Object.defineProperty(item, key, {\n      enumerable: true,\n      configurable: true,\n      get: () => v,\n      set: value => {\n        if (value !== v) {\n          v = value;\n          this.___events.___onChange(path, v);\n        }\n      }\n    });\n  }\n  constructor(item, parent, parentItem, ignoreKeys) {\n    super();\n    this.___events = new EventTrigger();\n    if (parentItem === undefined) {\n      parentItem = this;\n    } else delete this.___events;\n    let parentKeys = key => {\n      if (parent && parent.length > 0) return `${parent}.${key}`;\n      return key;\n    };\n    const parse = (value, parentKey) => {\n      try {\n        if (!ignoreKeys[parentKey] && valid(value) && !Array.isArray(value)) {\n          return new Create(value, parentKey, parentItem, ignoreKeys);\n        } else if (!ignoreKeys[parentKey] && value && Array.isArray(value) && value.length > 0) {\n          return value.map(x => {\n            if (valid(x)) {\n              return new Create(x, parentKey, parentItem, ignoreKeys);\n            } else return x;\n          });\n        }\n      } catch (e) {\n        console.error(e);\n      }\n      return value;\n    };\n    try {\n      for (let k of keys(item)) {\n        let parentKey = parentKeys(k);\n        let v = parse(item[k], parentKey);\n        if (v !== item[k]) item[k] = v;\n        Object.defineProperty(this, k, {\n          enumerable: true,\n          configurable: true,\n          get: () => item[k],\n          set: value => {\n            item[k] = parse(value, parentKey);\n            if (!ignoreKeys[parentKey]) {\n              parentItem.___events.___onChange(parentKey, item[k]);\n            }\n          }\n        });\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n}\nclass StateBuilder {\n  constructor(item) {\n    this.ignoreKeys = [];\n    this.bindKeys = [];\n    this.timeoutSpeed = 2;\n    this.item = item;\n  }\n  /*\n    disable settimeout by giving undefined value or specify a number in ms\n  */\n  timeout(speed) {\n    this.timeoutSpeed = speed;\n    return this;\n  }\n  /*\n  Ignore props from proxy\n  this is usefull when you have a big or recrusive object, those could be ignored as it may slow down the application\n  */\n  ignore(...ignoreKeys) {\n    for (let key of ignoreKeys) this.ignoreKeys.push(key);\n    return this;\n  }\n  /*\n  bind prop in ignored object\n  */\n  bind(...bindKeys) {\n    for (let key of bindKeys) this.bindKeys.push(key);\n    return this;\n  }\n  /*\n  build the local state\n  */\n  build() {\n    let refItem = refeObject();\n    if (refItem.current === undefined) {\n      refItem.current = this;\n    }\n    const $this = refItem.current;\n    if ($this.initilized === undefined) {\n      $this.initilized = new Create($this.item, undefined, undefined, toObject(...$this.ignoreKeys));\n      $this.initilized.___events.speed = $this.timeoutSpeed;\n    }\n    $this.initilized.hook();\n    for (let key of $this.bindKeys) {\n      $this.initilized.bind(key);\n    }\n    return $this.initilized;\n  }\n  /*\n   build the global state\n  */\n  globalBuild() {\n    if (this.initilized === undefined) {\n      this.initilized = new Create(this.item, undefined, undefined, toObject(...this.ignoreKeys));\n    }\n    return this.initilized;\n  }\n}\nconst StateInit = item => {\n  return new StateBuilder(item);\n};\nexport default StateInit;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","useRef","useState","v4","uuidv4","refeObject","reactState","newId","toObject","keys","length","AllKeys","reduce","c","v","getPrototypeChain","obj","prototypeChain","innerRecursiveFunction","currentPrototype","Object","getPrototypeOf","push","filter","x","item","prototypes","ks","flatMap","getOwnPropertyNames","obp","prototype","cbp","Create","includes","index","array","indexOf","valid","validArray","Set","Map","Array","isArray","EventTrigger","constructor","___events","___timer","undefined","___waitingEvents","___addedPaths","speed","add","id","remove","___onChange","key","parentItem","clearTimeout","global","split","reverse","i","join","fs","event","items","set","trigger","assign","fn","setTimeout","console","error","ICreate","hook","current","update","setUpdate","_a","get","a","refresh","values","useEffect","bind","path","p","defineProperty","enumerable","configurable","parent","ignoreKeys","parentKeys","parse","parentKey","map","k","StateBuilder","bindKeys","timeoutSpeed","timeout","ignore","build","refItem","$this","initilized","globalBuild","StateInit"],"sources":["/data/data/com.termux/files/home/storage/projects/react-smart-state/dist/shared/StateManagment.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { useRef, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nconst refeObject = useRef;\nconst reactState = useState;\n//const reactEffect = useEffect as any;\nfunction newId() {\n    return uuidv4();\n}\nconst toObject = (...keys) => {\n    if (keys.length === 0)\n        return { AllKeys: true };\n    return keys.reduce((c, v) => {\n        c[v] = true;\n        return c;\n    }, {});\n};\nfunction getPrototypeChain(obj) {\n    let prototypeChain = [];\n    (function innerRecursiveFunction(obj) {\n        let currentPrototype = obj != null ? Object.getPrototypeOf(obj) : null;\n        prototypeChain.push(currentPrototype);\n        if (currentPrototype != null) {\n            innerRecursiveFunction(currentPrototype);\n        }\n    })(obj);\n    return prototypeChain.filter(x => x !== null);\n}\nconst keys = (item) => {\n    let prototypes = getPrototypeChain(item);\n    let ks = [\n        ...Object.keys(item),\n        ...prototypes.flatMap(x => Object.getOwnPropertyNames(x))\n    ];\n    let obp = Object.getOwnPropertyNames(Object.prototype);\n    let cbp = Object.getOwnPropertyNames(Create.prototype);\n    ks = ks\n        .filter(x => !obp.includes(x) && !cbp.includes(x))\n        .filter((value, index, array) => array.indexOf(value) === index);\n    // alert(JSON.stringify(ks, undefined, 4));\n    return ks;\n};\n/*\nconst getValueByPath = (value: any, path: string) => {\n    let current = value;\n    for (let item of path.split(\".\")) {\n        current = current[item];\n    }\n\n    return current;\n};\n*/\nconst valid = (item, validArray) => {\n    if (!item || item === null)\n        return false;\n    if (item instanceof Set)\n        return false;\n    if (item instanceof Map)\n        return false;\n    if (typeof item === \"function\")\n        return false;\n    if (typeof item === \"string\")\n        return false;\n    if (validArray && Array.isArray(item) && item.length > 0) {\n        return valid(item[0]);\n    }\n    return typeof item === \"object\";\n};\nclass EventTrigger {\n    constructor() {\n        this.___events = {};\n        this.___timer = undefined;\n        this.___waitingEvents = {};\n        this.___addedPaths = [];\n        this.speed = 2;\n    }\n    add(id, item) {\n        this.___events[id] = item;\n    }\n    remove(id) {\n        delete this.___events[id];\n    }\n    ___onChange(key, parentItem) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                clearTimeout(this.___timer);\n                let global = key\n                    .split(\".\")\n                    .reverse()\n                    .filter((x, i) => i > 0)\n                    .join(\".\");\n                for (let item in this.___events) {\n                    if (this.___events[item].keys.AllKeys ||\n                        this.___events[item].keys[key] ||\n                        this.___events[item].keys[global]) {\n                        if (this.___events[item].fs === undefined) {\n                            if (!this.___waitingEvents[item]) {\n                                this.___waitingEvents[item] = {\n                                    event: this.___events[item],\n                                    items: new Map()\n                                };\n                            }\n                            this.___waitingEvents[item].items.set(key, {\n                                key: key,\n                                item: parentItem\n                            });\n                        }\n                        else\n                            this.___events[item].fs();\n                    }\n                }\n                const trigger = () => {\n                    let items = Object.assign({}, this.___waitingEvents);\n                    this.___waitingEvents = {};\n                    for (let item in items) {\n                        items[item].event.fn(items[item].items);\n                    }\n                };\n                if (this.speed !== undefined) {\n                    this.___timer = setTimeout(() => trigger(), this.speed);\n                }\n                else\n                    trigger();\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n}\nclass ICreate {\n}\nclass Create extends ICreate {\n    hook(...keys) {\n        let id = refeObject(newId()).current;\n        let ks = refeObject();\n        if (!ks.current)\n            ks.current = toObject(...keys);\n        let [update, setUpdate] = reactState();\n        this.___events.add(id, {\n            fn: items => {\n                if (!update) {\n                    setUpdate(Object.keys(ks.current).reduce((c, v) => {\n                        var _a;\n                        c[v] = (_a = items.get(v)) === null || _a === void 0 ? void 0 : _a.item;\n                        return c;\n                    }, {}));\n                }\n                else {\n                    let a = Object.assign({}, update);\n                    let refresh = false;\n                    for (let item of [...items.values()]) {\n                        if (a[item.key] !== item.item) {\n                            refresh = true;\n                            a[item.key] = item.item;\n                        }\n                    }\n                    if (refresh) {\n                        setUpdate(a);\n                    }\n                }\n            },\n            keys: ks.current\n        });\n    }\n    useEffect(fn, ...keys) {\n        let id = refeObject(newId()).current;\n        let ks = refeObject();\n        if (!ks.current)\n            ks.current = toObject(...keys);\n        this.___events.add(id, {\n            fs: () => fn(this),\n            keys: ks.current\n        });\n    }\n    bind(path) {\n        if (this.___events.___addedPaths.includes(path))\n            return;\n        this.___events.___addedPaths.push(path);\n        let item = this;\n        let key = path.split(\".\").reverse()[0];\n        for (let p of path.split(\".\")) {\n            if (typeof item[p] === \"object\") {\n                item = item[p];\n            }\n            else\n                break;\n        }\n        let v = item[key];\n        Object.defineProperty(item, key, {\n            enumerable: true,\n            configurable: true,\n            get: () => v,\n            set: (value) => {\n                if (value !== v) {\n                    v = value;\n                    this.___events.___onChange(path, v);\n                }\n            }\n        });\n    }\n    constructor(item, parent, parentItem, ignoreKeys) {\n        super();\n        this.___events = new EventTrigger();\n        if (parentItem === undefined) {\n            parentItem = this;\n        }\n        else\n            delete this.___events;\n        let parentKeys = (key) => {\n            if (parent && parent.length > 0)\n                return `${parent}.${key}`;\n            return key;\n        };\n        const parse = (value, parentKey) => {\n            try {\n                if (!ignoreKeys[parentKey] &&\n                    valid(value) &&\n                    !Array.isArray(value)) {\n                    return new Create(value, parentKey, parentItem, ignoreKeys);\n                }\n                else if (!ignoreKeys[parentKey] &&\n                    value &&\n                    Array.isArray(value) &&\n                    value.length > 0) {\n                    return value.map(x => {\n                        if (valid(x)) {\n                            return new Create(x, parentKey, parentItem, ignoreKeys);\n                        }\n                        else\n                            return x;\n                    });\n                }\n            }\n            catch (e) {\n                console.error(e);\n            }\n            return value;\n        };\n        try {\n            for (let k of keys(item)) {\n                let parentKey = parentKeys(k);\n                let v = parse(item[k], parentKey);\n                if (v !== item[k])\n                    item[k] = v;\n                Object.defineProperty(this, k, {\n                    enumerable: true,\n                    configurable: true,\n                    get: () => item[k],\n                    set: (value) => {\n                        item[k] = parse(value, parentKey);\n                        if (!ignoreKeys[parentKey]) {\n                            parentItem.___events.___onChange(parentKey, item[k]);\n                        }\n                    }\n                });\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n}\nclass StateBuilder {\n    constructor(item) {\n        this.ignoreKeys = [];\n        this.bindKeys = [];\n        this.timeoutSpeed = 2;\n        this.item = item;\n    }\n    /*\n      disable settimeout by giving undefined value or specify a number in ms\n    */\n    timeout(speed) {\n        this.timeoutSpeed = speed;\n        return this;\n    }\n    /*\n    Ignore props from proxy\n    this is usefull when you have a big or recrusive object, those could be ignored as it may slow down the application\n    */\n    ignore(...ignoreKeys) {\n        for (let key of ignoreKeys)\n            this.ignoreKeys.push(key);\n        return this;\n    }\n    /*\n    bind prop in ignored object\n    */\n    bind(...bindKeys) {\n        for (let key of bindKeys)\n            this.bindKeys.push(key);\n        return this;\n    }\n    /*\n    build the local state\n    */\n    build() {\n        let refItem = refeObject();\n        if (refItem.current === undefined) {\n            refItem.current = this;\n        }\n        const $this = refItem.current;\n        if ($this.initilized === undefined) {\n            $this.initilized = new Create($this.item, undefined, undefined, toObject(...$this.ignoreKeys));\n            $this.initilized.___events.speed = $this.timeoutSpeed;\n        }\n        $this.initilized.hook();\n        for (let key of $this.bindKeys) {\n            $this.initilized.bind(key);\n        }\n        return $this.initilized;\n    }\n    /*\n     build the global state\n    */\n    globalBuild() {\n        if (this.initilized === undefined) {\n            this.initilized = new Create(this.item, undefined, undefined, toObject(...this.ignoreKeys));\n        }\n        return this.initilized;\n    }\n}\nconst StateInit = (item) => {\n    return new StateBuilder(item);\n};\nexport default StateInit;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}